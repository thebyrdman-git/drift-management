---
- name: Test GitLab Repository Creation
  hosts: localhost
  gather_facts: false
  
  vars:
    repo_name: "test-repo"
    repo_description: "Test repository for validating GitLab automation workflow"
    repo_topics:
      - test
      - automation
      - ansible
    repo_visibility: internal  # Red Hat internal visibility
  
  pre_tasks:
    - name: Display test notice
      ansible.builtin.debug:
        msg: |
          â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
          ğŸ§ª TESTING GITLAB REPOSITORY CREATION
          â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
          
          Test Repository: {{ repo_name }}
          Visibility: {{ repo_visibility }} (Red Hat Internal)
          Topics: {{ repo_topics | join(', ') }}
          
          This will create a real repository on GitLab CEE.
          
          â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  
  roles:
    - role: gitlab_repo_manager
  
  post_tasks:
    - name: Display success message
      ansible.builtin.debug:
        msg: |
          â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
          âœ… TEST REPOSITORY CREATED
          â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
          
          ğŸ”— Repository: {{ gitlab_repo_url }}
          ğŸ”’ Visibility: internal (Red Hat only)
          ğŸ“‹ Topics: {{ final_topics | join(', ') }}
          
          Clone URLs:
          â€¢ HTTPS: {{ gitlab_repo_https }}
          â€¢ SSH: {{ gitlab_repo_ssh }}
          
          To delete test repo:
          Visit: {{ gitlab_repo_url }}/-/edit
          Scroll to bottom â†’ Delete project
          
          â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

